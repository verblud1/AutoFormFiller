#!/bin/bash

# Скрипт для безопасного выполнения git pull с сохранением несохраненных изменений

echo "Проверка состояния репозитория..."
git status

# Проверяем, есть ли несохраненные изменения
if [[ -n $(git status --porcelain) ]]; then
    echo "Найдены несохраненные изменения, сохраняем их..."
    git stash push -m "Автоматическое сохранение перед pull: $(date)"
    
    echo "Выполняем git pull..."
    git pull
    
    echo "Восстанавливаем сохраненные изменения..."
    git stash pop
else
    echo "Нет несохраненных изменений, выполняем git pull..."
    git pull
fi

echo "Операция завершена."